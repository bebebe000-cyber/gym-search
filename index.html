<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Club Ausstattungsliste</title>
  
</head>
  
<style>
  ::placeholder {
    color: #456178;
  }
</style>

<body style="background:#222222; font-family: Arial, Helvetica, sans-serif;">
  <div style="width:100%; min-height:100vh; display:flex; justify-content:center; align-items:center;">
    <div style="text-align:center;">


  <h1 style="margin-bottom:8px; font-size:40px; color:#456178;">Club Ausstattungsliste</h1>
  <div style="font-size:16px; margin-bottom:20px; color:#456178;">made by Gabriele Guolo :)</div>

  <input
    <input
  id="clubInput"
  type="text"
  placeholder="Club eingeben (z.B. Ahlen)"
  style="width:360px; padding:10px; font-size:16px; background:#222222; border:1px solid #333333;"
  onfocus="this.style.background='#333333'"
  onblur="this.style.background='#222222'"
  autocomplete="off"
  />
  <button
  id="searchBtn"
  style="padding:10px 18px; font-size:16px; background:#222222; border:1px solid #333333; color:#456178; cursor:pointer;"
  onmouseover="this.style.background='#333333'"
  onmouseout="this.style.background='#222222'"
  onmousedown="this.style.background='#333333'"
  onmouseup="this.style.background='#222222'"
>
  Search
</button>

  <div id="status" style="margin-top:14px; font-size:12px;"></div>
  <div id="result" style="margin-top:18px;"></div>

  <script>
    // Which columns to display and in what order
    const FEATURES = [
      "Sauna",
      "Infrarot",
      "Lady Area",
      "Milon",
      "Collagen",
      "Solarium",
      "Massage",
      "PowerPlate",
      "andere Vibraplatte"
    ];

    let clubs = [];
    const statusDiv = document.getElementById("status");
    const resultDiv = document.getElementById("result");

    function normalizeText(s) {
      return (s ?? "")
        .toString()
        .trim()
        .toLowerCase()
        .replace(/\s+/g, " ");
    }

    function showStatus(msg) {
      statusDiv.textContent = msg;
    }

    function showNotFound() {
      resultDiv.innerHTML = "<b>City not found.</b>";
    }

    function showTable(found) {
      let rows = "";
      for (const key of FEATURES) {
        const value = (found[key] ?? "").toString().trim();
        rows += "<tr>"
  + "<td style='padding:4px 10px; text-align:left; color:##4ебе81;'>" + key + ":</td>"
  + "<td style='padding:4px 10px; text-align:left; color:#456178;'><b>" + (value || "No data") + "</b></td>"
  + "</tr>";;
      }

      resultDiv.innerHTML =
        "<div style='display:inline-block; text-align:left;'>" +
          "<div style='margin-bottom:8px; font-size:18px; color:#456178;'>"
+ "<b>Club:</b> " + (found.Club || "")
+ "</div>" +
          "<table style='border-collapse:collapse; font-size:16px; color:#456178;'>" + rows + "</table>" +
        "</div>";
    }

    function searchClub() {
      const input = normalizeText(document.getElementById("clubInput").value);
      resultDiv.innerHTML = "";

      if (!input) {
        showStatus("Bitte Club oder Stadt eingeben.");
        return;
      }

      if (!clubs.length) {
        showStatus("Daten sind noch nicht geladen oder konnten nicht geladen werden.");
        return;
      }

      showStatus("");

      const found = clubs.find(c => normalizeText(c.Club).includes(input));

      if (!found) {
        showNotFound();
        return;
      }

      showTable(found);
    }

    // Button and Enter key
    document.getElementById("searchBtn").addEventListener("click", searchClub);
    document.getElementById("clubInput").addEventListener("keypress", function (e) {
      if (e.key === "Enter") searchClub();
    });

    // Load data.json
    showStatus("Daten werden geladen ...");

    fetch("data.json", { cache: "no-store" })
      .then(r => {
        if (!r.ok) throw new Error("HTTP " + r.status);
        return r.json();
      })
      .then(d => {
        if (!Array.isArray(d)) throw new Error("data.json ist kein Array");
        clubs = d.filter(x => x && x.Club);
        showStatus("Daten geladen: " + clubs.length + " Clubs");
        console.log("Loaded clubs:", clubs);
      })
      .catch(err => {
        console.error("Failed to load data.json:", err);
        showStatus("Fehler: data.json konnte nicht geladen werden. Prüfe Dateiname, Ort (gleicher Ordner) und JSON-Format.");
      });
  </script>
    
   </div>
</div>
</body>
</html>
